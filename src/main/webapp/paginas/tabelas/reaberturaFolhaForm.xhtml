<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="content">

		<div class="titulo-pagina">

			<h2>Cadastro do Reabertura da Folha do Esocial</h2>

		</div>

		<h:outputStylesheet>		
			.rf-pp-hdr-cnt {
			    font-size: 14px;		    
			}
	
			.rf-pp-cnt {		    
			    font-size: 14px;
			}		
		</h:outputStylesheet>

		<h:form id="form" styleClass="formularios">

			<br />

			<h:messages infoClass="infoMessage" errorClass="errorMessage" />

			<fieldset>
				<legend>Dados Evento S-1298</legend>

				<br />
				<fieldset>

					<div class="select-box box-16">
						<label for="mes">Periodo: </label>
						<div class="conteiner">
							<h:selectOneMenu
								value="#{reaberturaFolhaForm.entidade.indicativoApuracao}"
								disabled="#{reaberturaFolhaForm.emEdicao}">
								<f:selectItem itemLabel="Selecione..." itemValue="0"
									noSelectionOption="true" />
								<f:selectItem id="id1" itemLabel="Mensal" itemValue="1" />
								<f:selectItem id="id13" itemLabel="Anual (13° salário)"
									itemValue="2" />
								<a4j:ajax event="change" execute="@this" render="@this, mesF" />
							</h:selectOneMenu>
						</div>
					</div>


					<div class="input-box box-10">
						<label for="">Ano Referência: *</label>
						<div class="conteiner">
							<rich:select defaultLabel="Selecione..." id="ano"
								value="#{reaberturaFolhaForm.entidade.anoReferencia}"
								disabled="#{reaberturaFolhaForm.emEdicao}">
								<f:selectItems id="comboAno"
									value="#{reaberturaFolhaForm.comboAno}" var="servidor"
									itemValue="#{servidor}" itemLabel="#{servidor}" />
								<a4j:ajax event="change" execute="@this" />
							</rich:select>
						</div>
					</div>

					<a4j:outputPanel ajaxRendered="true">
						<div class="select-box box-16">
							<label for="mes">Mês: </label>
							<div class="conteiner">
								<h:selectOneMenu id="mesF"
									value="#{reaberturaFolhaForm.entidade.mesReferencia}"
									disabled="#{reaberturaFolhaForm.emEdicao}"
									rendered="#{reaberturaFolhaForm.entidade.indicativoApuracao eq 1}">
									<f:selectItem id="mes0F" itemLabel="Selecione..." itemValue="0" />
									<f:selectItem id="mes1F" itemLabel="Janeiro" itemValue="01" />
									<f:selectItem id="mes2F" itemLabel="Fevereiro" itemValue="02" />
									<f:selectItem id="mes3F" itemLabel="Março" itemValue="03" />
									<f:selectItem id="mes4F" itemLabel="Abril" itemValue="04" />
									<f:selectItem id="mes5F" itemLabel="Maio" itemValue="05" />
									<f:selectItem id="mes6F" itemLabel="Junho" itemValue="06" />
									<f:selectItem id="mes7F" itemLabel="Julho" itemValue="07" />
									<f:selectItem id="mes8F" itemLabel="Agosto" itemValue="08" />
									<f:selectItem id="mes9F" itemLabel="Setembro" itemValue="09" />
									<f:selectItem id="mes10F" itemLabel="Outubro" itemValue="10" />
									<f:selectItem id="mes11F" itemLabel="Novembro" itemValue="11" />
									<f:selectItem id="mes12F" itemLabel="Dezembro" itemValue="12" />
									<f:selectItem id="mes13F" itemLabel="Anual (13° salário)"
										itemValue="13" />
									<a4j:ajax event="change" execute="@this" />
								</h:selectOneMenu>

							</div>
						</div>

					</a4j:outputPanel>

				</fieldset>
				<fieldset>
					<legend for="">Informações de identificação do empregador.
						*</legend>
					<div class="input-box box-10">
						<label for="">Tipo de inscrição</label>

						<div class="conteiner">
							<h:inputText id="tpInsc" maxlength="15" disabled="true"
								value="#{reaberturaFolhaForm.entidade.tipoInscricaoEmpregador}" />
						</div>

					</div>

					<div class="input-box box-25">
						<label for="">Número de inscrição do contribuinte</label>
						<div class="conteiner">
							<h:inputText id="nrInsc" maxlength="10" disabled="true"
								value="#{reaberturaFolhaForm.entidade.numeroInscricaoEmpregador}" />
						</div>
					</div>
				</fieldset>
			</fieldset>
			
			<!-- BOTÕES -->
			<h:commandButton value="Salvar" styleClass="bt-padrao fr mg-right-10">
				<rich:componentControl target="popup" operation="show" />
			</h:commandButton>

			<a href="/srh/paginas/tabelas/reaberturaFolhaList.faces"
				class="bt-voltar fr mg-right-10 mg-bottom-10">Voltar</a>


			<!-- POPUP  --> 	
			<rich:popupPanel id="popup" modal="true" width="300"
				onmaskclick="#{rich:component('popup')}.hide()" autosized="true"
				resizeable="false">
				<f:facet name="header">
					<h:outputText value="Confirmar salvamento" />
				</f:facet>

				<p>Deseja realmente salvar evento de reabertura?"</p>
				<div class="dialog-confirmacao">
					<p>
						<h:commandButton value="Não" styleClass="bt-padrao fr mg-right-10"
							style="background:#eee; color:#303030; width: 80px;"
							onclick="#{rich:component('popup')}.hide(); return false;" />
					</p>
					<p>
						<h:commandButton value="Sim"
							action="#{reaberturaFolhaForm.salvar()}" style="width: 80px;"
							styleClass="bt-padrao fr mg-right-30">
							<a4j:ajax
								oncomplete="#{rich:component('popup')}.hide(); return false;"></a4j:ajax>
						</h:commandButton>
					</p>
				</div>
			</rich:popupPanel>

		</h:form>

		<script>
			if (document.getElementById('form:alterar') != null) {
				if (document.getElementById('form:alterar').value == 'true') {
					document.getElementById('form:PesquisarServidor').style.visibility = 'hidden';
				}
			}
		</script>

	</ui:define>
</ui:composition>
