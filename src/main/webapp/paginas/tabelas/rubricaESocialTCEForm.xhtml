<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="content">		
		<script>
			jQuery(document).ready(function($) {
				contarCaracteres();				
			});
			function contarCaracteres() {
				var element = document.getElementById('form:observacao');
				document
					.getElementById('countChar')
					.innerHTML = 'Quantidade de caracteres: '
						+ element.value.length
						+ ' / 255' ;
			}			
		</script>

		<div class="titulo-pagina">

			<h2>Cadastro de Rubrica ESocial</h2>

		</div>

		<h:form id="form" styleClass="formularios">
		
			<div class="corpo-formulario">
			
				<ui:include src="../../WEB-INF/templates/esocial-legenda.xhtml" />
	
				<h:messages id="messages" infoClass="infoMessage" errorClass="errorMessage" />
				
				<ui:include src="../../WEB-INF/templates/subtitulo.xhtml">
                    <ui:param name="subtitulo" value="Informações de identificação" />
                </ui:include>

				<div class="input-box box-10">
					<label for="">ID</label>
					<div class="conteiner">
						<h:inputText 
							disabled="true"
							value="#{rubricaESocialTCEFormBean.entidade.id}" />
					</div>
				</div>

				<div class="input-box box-15">
					<label for="">Código * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<h:inputText 
							id="codigo"
							value="#{rubricaESocialTCEFormBean.entidade.codigo}"
							maxlength="30" 
							required="true"
							requiredMessage="O Código é obrigatório." />
					</div>
				</div>
				
				<div class="select-box box-25">
					<label for="">Tabela * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="400"
							id="tabela"
							value="#{rubricaESocialTCEFormBean.entidade.tabela}"
							required="true"
							requiredMessage="A tabela da rubrica é obrigatório."
							converter="entityConverter">							
							<f:selectItems 
								id="tabelaItens"
								value="#{rubricaESocialTCEFormBean.tabelasRubrica}" 
								var="tabela"
								itemLabel="#{tabela.codigo} - #{tabela.descricao}" 
								itemValue="#{tabela}" />
						</rich:select>
					</div>
				</div>
				
				<ui:include src="../../WEB-INF/templates/esocial-vigencia.xhtml">
                    <ui:param name="vigencia" value="#{rubricaESocialTCEFormBean.entidade.esocialVigencia}" />
                </ui:include> 

				<ui:include src="../../WEB-INF/templates/subtitulo.xhtml">
                    <ui:param name="subtitulo" value="Detalhamento das informações" />
                </ui:include>
				
				<div class="select-box box-30">
					<label for="">Rubrica TCE - Descrição * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="400"
							id="rubricaTce"
							value="#{rubricaESocialTCEFormBean.entidade.rubrica}"
							required="true"
							requiredMessage="A rubrica do TCE é obrigatória."
							converter="entityConverter">							
							<f:selectItems 
								id="rubricaTceItens"
								value="#{rubricaESocialTCEFormBean.rubricasTCE}" 
								var="rub"
								itemLabel="#{rub.codigo} - #{rub.descricao}" 
								itemValue="#{rub}" />
						</rich:select>
					</div>
				</div>
				
				<div class="select-box box-40">
					<label for="">Natureza da Rubrica * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="500"						
							id="rubricaESocial"
							value="#{rubricaESocialTCEFormBean.entidade.rubricaESocial}"
							required="true"
							requiredMessage="A rubrica do eSocial é obrigatória."
							converter="entityConverter">							
							<f:selectItems 
								id="rubricaESocialItens"
								value="#{rubricaESocialTCEFormBean.rubricasESocial}" 
								var="rub"
								itemLabel="#{rub.codigo} - #{rub.descricao}" 
								itemValue="#{rub}" />
						</rich:select>
					</div>
				</div>

				<div class="select-box box-30">
					<label for="">Tipo de rubrica * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="350"
							id="tipo"
							value="#{rubricaESocialTCEFormBean.entidade.tipo}"
							required="true"
							requiredMessage="O tipo de rubrica é obrigatório.">							
							<f:selectItems 
								id="comboTipo"
								value="#{rubricaESocialTCEFormBean.comboTipoRubrica}" 
								var="tipo"
								itemLabel="#{tipo.codigo} - #{tipo.descricao}" 
								itemValue="#{tipo}" />
						</rich:select>
					</div>
				</div>
								
				<div class="select-box box-50">
				
					<fieldset class="conteiner">
						
						<legend>Código de incidência tributária para Previdência Social * <span class="identificador-esocial">e</span></legend>
									
						<div class="select-box box-50">
							<label>Tipo</label>
							<div class="conteiner">
								<rich:select 
									enableManualInput="true"
									defaultLabel="Selecione..."	
									clientFilterFunction="customFilter"
									listWidth="350"
									id="codIncCPTipo"
									value="#{rubricaESocialTCEFormBean.codigoPrevidTipo}">							
									<f:selectItems 
										value="#{rubricaESocialTCEFormBean.comboCodigoPrevidTipo}" 
										var="item"
										itemLabel="#{item.descricao}" 
										itemValue="#{item}" />
									<a4j:ajax event="selectitem" execute="@this" render="codIncCPCodigo" />	
								</rich:select>
							</div>
						</div>
						
						<div class="select-box box-45">
							<label>Código</label>
							<div class="conteiner">
								<rich:select 
									enableManualInput="true"
									defaultLabel="Selecione..."	
									clientFilterFunction="customFilter"
									listWidth="350"
									id="codIncCPCodigo"
									value="#{rubricaESocialTCEFormBean.entidade.codigoPrevid}"
									required="true"
									requiredMessage="O código de incidência PREVID é obrigatório.">							
									<f:selectItems 
										value="#{rubricaESocialTCEFormBean.codigoPrevidTipo.codigos}" 
										var="item"
										itemLabel="#{item.codigo} - #{item.descricao}" 
										itemValue="#{item}" />
								</rich:select>
							</div>
						</div>
					
					</fieldset>
				</div>
				
				<div class="select-box box-50">
				
					<fieldset class="conteiner">
						
						<legend>Código de incidência tributária para IRRF * <span class="identificador-esocial">e</span></legend>
					
						<div class="select-box box-50">
							<label for="">Tipo</label>
							<div class="conteiner">
								<rich:select 
									enableManualInput="true"
									defaultLabel="Selecione..."	
									clientFilterFunction="customFilter"
									listWidth="350"
									id="codIncIRRFTipo"
									value="#{rubricaESocialTCEFormBean.codigoIrrfTipo}">
									<f:selectItems
										value="#{rubricaESocialTCEFormBean.comboCodigoIrrfTipo}" 
										var="item"
										itemLabel="#{item.descricao}" 
										itemValue="#{item}" />
									<a4j:ajax event="selectitem" execute="@this" render="codIncIRRFCodigo" />	
								</rich:select>
							</div>
						</div>
						
						<div class="select-box box-50">
							<label for="">Código</label>
							<div class="conteiner">
								<rich:select 
									enableManualInput="true"
									defaultLabel="Selecione..."	
									clientFilterFunction="customFilter"
									listWidth="350"
									id="codIncIRRFCodigo"
									value="#{rubricaESocialTCEFormBean.entidade.codigoIrrf}"
									required="true"
									requiredMessage="O código de incidência IRRF é obrigatório.">
									<f:selectItems 
										value="#{rubricaESocialTCEFormBean.codigoIrrfTipo.codigos}" 
										var="item"
										itemLabel="#{item.codigo} - #{item.descricao}" 
										itemValue="#{item}" />
								</rich:select>
							</div>
						</div>
					
					</fieldset>
				</div>	
				
				<div class="select-box box-25">
					<label for="">Código de incidência tributária<br />para FGTS * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="350"
							id="codIncFGTS"
							value="#{rubricaESocialTCEFormBean.entidade.codigoFgts}"
							required="true"
							requiredMessage="O código de incidência FGTS é obrigatório.">
							<f:selectItems 
								id="comboCodIncFGTS"
								value="#{rubricaESocialTCEFormBean.comboCodigoFgts}" 
								var="item"
								itemLabel="#{item.codigo} - #{item.descricao}" 
								itemValue="#{item}">								
							</f:selectItems>							
						</rich:select>
					</div>
				</div>
				
				
				<div class="select-box box-25">
					<label for="">Código de incidência tributária<br />para contribuição sindical * <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<rich:select 
							enableManualInput="true"
							defaultLabel="Selecione..."	
							clientFilterFunction="customFilter"
							listWidth="350"
							id="codIncSIND"
							value="#{rubricaESocialTCEFormBean.entidade.codigoSindicato}"
							required="true"
							requiredMessage="O código de incidência de contribuição sindical é obrigatório.">							
							<f:selectItems 
								id="comboCodIncSIND"
								value="#{rubricaESocialTCEFormBean.comboCodigoSindicato}" 
								var="item"
								itemLabel="#{item.codigo} - #{item.descricao}" 
								itemValue="#{item}" />
						</rich:select>
					</div>
				</div>
				

				<div class="textarea-box box-100">
					<label for="">Observação <span class="identificador-esocial">e</span></label>
					<div class="conteiner">
						<h:inputTextarea 
							id="observacao"
							value="#{rubricaESocialTCEFormBean.entidade.observacao}"
							validatorMessage="O campo observação excedeu o tamanho máximo de 255 caracteres"
							onkeyup="contarCaracteres();">
							<f:validateLength maximum="255" />
						</h:inputTextarea>
					</div>
						<label id="countChar" style="margin-top: 2px; font-size: 11px;"></label>
				</div>				              

			</div>

			<ui:fragment rendered="#{true}">

				<h:commandButton value="Salvar"
					action="#{rubricaESocialTCEFormBean.salvar}"
					styleClass="bt-padrao fr" />
					
			</ui:fragment>

			<a href="/srh/paginas/tabelas/rubricaESocialTCEList.faces"
				class="bt-padrao fr mg-right-10">Voltar</a>

		</h:form>

	</ui:define>
</ui:composition>
