<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<ui:define name="content">

		<div class="titulo-pagina">

			<h2>Consulta de Cargo</h2>

		</div>

		<h:form id="form" styleClass="formularios box-border">

			<h:messages infoClass="infoMessage" errorClass="errorMessage" />

			<div class="input-box box-40">
				<label for="">Cargo</label>
				<div class="conteiner">
					<h:inputText id="cargo" value="#{cargoListBean.nomenclatura}" />
				</div>
			</div>

			<div class="radios-group box-38">
				<h3>Situação</h3>
				<div class="conteiner">
					<div class="radio-box">
						<h:selectOneRadio id="situacao" value="#{cargoListBean.situacao}">
							<f:selectItem id="normal" itemLabel="Normal" itemValue="1" />
							<f:selectItem id="vagar" itemLabel="Extinto ao Vagar"
								itemValue="2" />
							<f:selectItem id="extinto" itemLabel="Extinto" itemValue="3" />
							<f:selectItem id="transicao" itemLabel="Em Transição"
								itemValue="4" />
						</h:selectOneRadio>
					</div>
				</div>
			</div>

			<h:commandButton id="consultar" value="Consultar"
				action="#{cargoListBean.consultar}"
				styleClass="bt-padrao fl mg-top-18" render="scroller-tabela,lista" />
			<h:commandButton id="relatorio" value="Relatório"
				action="#{cargoListBean.relatorio}"
				styleClass="bt-padrao fl mg-top-18 mg-left-10"
				style="margin-left: 10px" />

			<div class="tabela-dados">

				<rich:dataTable id="lista" value="#{cargoListBean.dataModel}"
					var="item" rows="10" binding="#{cargoListBean.dataTable}">

					<h:column id="col1" headerClass="cel-10">
						<f:facet name="header">
                            ID
                        </f:facet>
						<center>
							<h:outputText id="item1" value="#{item.id}" />
						</center>
					</h:column>
					<h:column id="col2" headerClass="cel-50">
						<f:facet name="header">
                            Nomenclatura
                        </f:facet>
						<h:outputText id="item2" value="#{item.nomenclatura}"
							styleClass="cel-75" />
					</h:column>
					
					<ui:include src="../../WEB-INF/templates/esocial-vigencia-coluna.xhtml" />  

					<h:column id="col4"
						rendered="#{LoginBean.anyGranted('ROLE_CARGO_ALTERAR')}"
						headerClass="cel-10">
						<f:facet name="header">
                            EDITAR
                        </f:facet>
						<h:commandLink 
							id="editar" 
							value="Editar"
							action="#{cargoListBean.editar}" 
							styleClass="ico-editar">
							<f:setPropertyActionListener target="#{cargoListBean.entidade}"	value="#{item}" />
						</h:commandLink>
					</h:column>

					<h:column id="col5"
						rendered="#{LoginBean.anyGranted('ROLE_CARGO_EXCLUIR')}">
						<f:facet name="header">
                            EXCLUIR
                        </f:facet>                        
						<a4j:commandLink 
							id="excluir" 
							value="Excluir"
							styleClass="ico-delete"
							onclick="alertaExclusao()" 
							execute="@this">							
							<f:setPropertyActionListener target="#{cargoListBean.entidade}" value="#{item}" />
						</a4j:commandLink>
						<a4j:jsFunction name="excluir" action="#{cargoListBean.excluir}" render="form"/>
					</h:column>

				</rich:dataTable>

				<rich:dataScroller id="scroller-tabela" for="lista" stepControls="hide"
					align="center" rendered="#{cargoListBean.pagedList.size() > 0}" />

			</div>

			<h:commandButton 
				id="limpaTela" 
				value="Limpar"
				action="listar"
				styleClass="bt-padrao fr mg-right-15" />

			<h:commandButton 
				id="incluir" 
				value="Incluir"
				action="incluirAlterar"
				styleClass="bt-padrao fr mg-right-15"
				rendered="#{LoginBean.anyGranted('ROLE_CARGO_INSERIR')}" />
		</h:form>

	</ui:define>
</ui:composition>
