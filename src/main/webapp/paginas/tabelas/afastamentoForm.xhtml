<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	  xmlns="http://www.w3.org/1999/xhtml"      
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
 	  xmlns:c="http://java.sun.com/jsp/jstl/core"
 	  xmlns:a4j="http://richfaces.org/a4j"
 	  xmlns:rich="http://richfaces.org/rich" >

	<ui:define name="content">

		<div class="titulo-pagina">

			<h2>Cadastro de Afastamento ESocial</h2>

		</div>

         <h:form id="form" styleClass="formularios">

			<br/>

            <h:messages infoClass="infoMessage" errorClass="errorMessage" />

			<fieldset>		
			<div class="select-box box-65">
				<label for="">Servidor *</label>
				<div class="conteiner">
					<h:selectOneMenu id="servidor"									
									 converter="entityConverter" 
									 rendered="#{!afastamentoFormBean.emEdicao}"
									 value="#{afastamentoFormBean.servidorFuncional}">
					  	<f:selectItem id="selecioneServidor" itemLabel="Selecione..."/>
					  	<f:selectItems 	id="comboServidor"
					  					value="#{afastamentoFormBean.servidorEnvioList}"
					  					var="servidor"
					  					itemValue="#{servidor}"
					  					itemLabel="#{servidor.nome}"/>
					  					
					  					<f:ajax listener="#{afastamentoFormBean.carregarAfastamentoListChange}" execute="@this"  render="form"/>
					</h:selectOneMenu>
				</div>
				
				<a4j:outputPanel rendered="#{not empty afastamentoFormBean.licencaList}" >
				<div class="conteiner">
			
					<label for="">Afastamento *</label>
						<h:selectOneMenu id="afastamento"									
										 converter="afastamentoConverter" 
										 rendered="#{!afastamentoFormBean.emEdicao}"
										 required="true"
										 requiredMessage="Afastamento obrigatório"
										 value="#{afastamentoFormBean.entidade.licenca}"
										 >
						  	<f:selectItem id="selecioneAfastamento" itemLabel="Selecione..."/>
						  	<f:selectItems 	id="comboAfastamento"
						  					value="#{afastamentoFormBean.licencaList}"
						  					var="licenca"
						  					itemValue="#{licenca}"
						  					itemLabel="#{licenca.tipoLicenca.descricao} #{licenca.dataFinalAfastamentoFormat}"
						  					/>						  		
						  					<f:ajax execute="@this" />
						</h:selectOneMenu>
			
				</div>
				</a4j:outputPanel>
				 
				<div class="input-box box-40">						
						<div class="conteiner">
							<h:inputText id="nomeEdicao" 
										 maxlength="10"
										 disabled="true"
										 rendered="#{afastamentoFormBean.emEdicao}"
										 value="#{afastamentoFormBean.servidorFuncional.nome}" />
						</div>
				</div>
				
			</div>
				<h:commandButton actionListener="#{afastamentoFormBean.consultar}" value="Consultar"  rendered="#{!afastamentoFormBean.emEdicao}" styleClass="bt-padrao fr mg-right-10" /> 
				
			</fieldset>
			
			
			<fieldset>

				<legend>Dados Evento S-2230</legend>

				<br/>

            	<!-- <h:messages id="messages" infoClass="infoMessage" errorClass="errorMessage" /> -->
            	
            	<fieldset>
					<legend>ideEmpregador:</legend>
						<div class="input-box box-10">
							<label for="">tpInsc</label>
							<div class="conteiner">
								<h:inputText id="tpInsc" 
											 maxlength="15"
											 disabled="true"
											 value="1" />
							</div>
						</div>

						<div class="input-box box-25">
							<label for="">nrInsc</label>
							<div class="conteiner">
								<h:inputText id="nrInsc" 
											 maxlength="10"
											 disabled="true"
											 value="09499757" />
							</div>
						</div>
				</fieldset>

				
				<fieldset>
					<legend>ideVinculo:</legend>
						<div class="input-box box-15">
							<label for="">cpfTrab</label>
							<div class="conteiner">
								<h:inputText id="cpf" 
											 maxlength="15"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.cpfTrab}" />
							</div>
						</div>
						
						<div class="input-box box-15">
							<label for="">matricula</label>
							<div class="conteiner">
								<h:inputText id="matricula" 
											 maxlength="15"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.matricula}" />
							</div>
						</div>
					
				</fieldset>
				
				<fieldset>
					<legend>infoAfastamento:</legend>
						<div class="input-box box-15">
							<label for="">dtIniAfast</label>
							<div class="conteiner">
								<h:inputText id="dtIniAfast" 
											 maxlength="10"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.dtIniAfast}" />
							</div>
						</div>
						
						<div class="input-box box-8">
							<label for="">codMotAfast</label>
							<div class="conteiner">
								<h:inputText id="tpProv" 
											 maxlength="15"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.codMotAfast}" />
							</div>
						</div>
						
												<div class="input-box box-15">
							<label for="">matricula</label>
							<div class="conteiner">
								<h:inputText id="observacao" 
											 maxlength="15"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.observacao}" />
							</div>
						</div>
						
						<div class="input-box box-15">
							<label for="">dtTermAfast</label>
							<div class="conteiner">
								<h:inputText id="dtTermAfast" 
											 maxlength="10"
											 disabled="true"
											 value="#{afastamentoFormBean.entidade.dtTermAfast}" />
							</div>
						</div>
					
				</fieldset>
				
			</fieldset>
			
			
			
			<h:commandButton actionListener="#{afastamentoFormBean.salvarEvento}" value="Salvar" styleClass="bt-padrao fr mg-right-10" />
			
			<a href="/srh/paginas/tabelas/afastamentoList.faces" class="bt-voltar fr mg-right-10 mg-bottom-10">Voltar</a>

		</h:form>

		<script>
			if (document.getElementById('form:alterar') != null) {
				if (document.getElementById('form:alterar').value == 'true') {
					document.getElementById('form:PesquisarServidor').style.visibility='hidden';				
				}	
			}
		</script>

	</ui:define>
</ui:composition>