<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="content">

		<style>
.formularios fieldset, .box-border {
	border: 1px solid #c6c6c6;
	padding: 15px 15px 0px 15px;
	padding-right: 0;
	overflow: auto;
	margin-bottom: 10px;
	min-height: 100px;
}

.formularios fieldset fieldset {
	min-height: auto;
	width: max-content;
}
</style>

		<script>
			jQuery(document).ready(function($) {
				contarCaracteres();
			});
			function contarCaracteres() {
				document.getElementById('countChar').innerHTML = 'Quantidade de caracteres: '
						+ (document.getElementById('form:descricao').value.length);
			}
		</script>

		<div class="titulo-pagina">

			<h2>Cadastro de Ambiente de Trabalho</h2>

		</div>

		<h:form id="form" styleClass="formularios">

			<fieldset>

				<h:messages id="messages" infoClass="infoMessage"
					errorClass="errorMessage" />

				<div class="input-box box-10">
					<label for="">ID</label>
					<div class="conteiner">
						<h:inputText disabled="true"
							value="#{ambienteTrabalhoFormBean.entidade.id}" />
					</div>
				</div>

				<div class="input-box box-25">
					<label for="">Código *</label>
					<div class="conteiner">
						<h:inputText id="codigo"
							value="#{ambienteTrabalhoFormBean.entidade.codigo}"
							maxlength="30" required="true"
							requiredMessage="O Código é obrigatório." />
					</div>
				</div>

				<div class="input-box box-60">
					<label for="">Nome *</label>
					<div class="conteiner">
						<h:inputText id="nome"
							value="#{ambienteTrabalhoFormBean.entidade.nome}" maxlength="100"
							required="true"
							requiredMessage="O Nome do Ambiente é obrigatório." />
					</div>
				</div>

				<div class="select-box box-40">
					<label for="">Tipo de Local *</label>
					<div class="conteiner">
						<h:selectOneMenu id="local"
							value="#{ambienteTrabalhoFormBean.entidade.localAmbiente}"
							required="true"
							requiredMessage="O Local do Ambiente é obrigatório.">
							<f:selectItem id="selecioneLocal" itemLabel="Selecione..." />
							<f:selectItems id="comboLocal"
								value="#{ambienteTrabalhoFormBean.comboLocal}" var="local"
								itemLabel="#{local.descricao}" itemValue="#{local}" />
						</h:selectOneMenu>
					</div>
				</div>

				<div class="select-box box-40">
					<label for="">Estabelecimento</label>
					<div class="conteiner">
						<h:selectOneMenu id="estabelecimento" converter="entityConverter"
							value="#{ambienteTrabalhoFormBean.entidade.estabelecimento}"
							required="true"
							requiredMessage="O Estabelecimento é obrigatório.">
							<f:selectItem id="selecioneEstabelecimento" itemLabel="Selecione..." />
							<f:selectItems id="comboEstabelecimento"
								value="#{ambienteTrabalhoFormBean.comboEstabelecimento}" var="e"
								itemLabel="#{e.tipoInscricao} - #{e.numeroInscricao}" itemValue="#{e}" />
						</h:selectOneMenu>
					</div>
				</div>

				<div class="textarea-box box-100">
					<label for="">Descrição *</label>
					<div class="conteiner">
						<h:inputTextarea id="descricao"
							value="#{ambienteTrabalhoFormBean.entidade.descricao}"
							validatorMessage="O campo Descrição excedeu o tamanho máximo de 4000 caracteres"
							onkeyup="contarCaracteres();" required="true"
							requiredMessage="A Descrição do Ambiente é obrigatória.">
							<f:validateLength maximum="4000" />
						</h:inputTextarea>
					</div>
					<label id="countChar" style="margin-top: 2px; font-size: 11px;"></label>
				</div>

				<fieldset class="fl">

					<legend>Período de vigência</legend>

					<div class="input-box box-50">
						<label for="">Início *</label>
						<div class="conteiner">
							<h:inputText id="dataInicio" name="dataInicio"
								styleClass="maskData" converter="dateConverter"
								value="#{ambienteTrabalhoFormBean.entidade.inicioValidade}"
								maxlength="10" required="true"
								requiredMessage="O início da vigência é obrigatório." />
						</div>
					</div>

					<div class="input-box box-50">
						<label for="">Fim</label>
						<div class="conteiner">
							<h:inputText id="dataFim" name="dataFim" styleClass="maskData"
								converter="dateConverter"
								value="#{ambienteTrabalhoFormBean.entidade.fimValidade}"
								maxlength="10" />
						</div>
					</div>

				</fieldset>

			</fieldset>

			<ui:fragment rendered="#{true}">

				<h:commandButton value="Salvar"
					action="#{ambienteTrabalhoFormBean.salvar}"
					styleClass="bt-padrao fr" />

				<a href="/srh/paginas/tabelas/ambienteTrabalhoForm.faces"
					class="bt-padrao fr mg-right-10">Limpar</a>

			</ui:fragment>

			<a href="/srh/paginas/tabelas/ambienteTrabalhoList.faces"
				class="bt-padrao fr mg-right-10">Voltar</a>

		</h:form>

	</ui:define>
</ui:composition>
