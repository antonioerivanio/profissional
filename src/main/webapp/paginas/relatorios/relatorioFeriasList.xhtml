<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	  xmlns="http://www.w3.org/1999/xhtml"     
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
 	  xmlns:c="http://java.sun.com/jsp/jstl/core"
 	  xmlns:a4j="http://richfaces.org/a4j"
 	  xmlns:rich="http://richfaces.org/rich" >

	<ui:define name="content">
	
		<script>
			function openwindow() {
				nome = document.getElementById('form:nomeCompletoPessoa').value;
				findAll = "OK";
				if (nome.length > 2) {
					window.open("/srh/paginas/funcional/funcionalConsulta.faces?nome=" + nome + "&amp;find=all","mywindow","scrollbars=1,menubar=0,resizable=0,width=800,height=300");
				} else {
					alerta('Digite pelo menos 3 caracteres para a pesquisa.');
				}			
			}
		</script>
		
		<style>			
			fieldset td {
				float: left;
				margin: 5px;
				width: 100%;
				font-size: 12px;
			}
			fieldset td label{
				vertical-align: top;	
			}			
		</style>
		
		
		<div class="titulo-pagina">

			<h2>Relatório de Férias</h2>

		</div>
		
			
		<h:form id="form" styleClass="formularios">
			
			<h:messages id="messages" infoClass="infoMessage" errorClass="errorMessage" />
						
			<rich:tabPanel id="tabPanel" switchType="client"> 
			
				<rich:tab id="tab1" header="Vigentes"> 
				
					<div class="box-100" style="display: inline-block;">
					
						<div class="input-box box-10">
							<label for="">Matrícula</label>
							<div class="conteiner">
								<h:inputText id="matricula"
											 name="matricula"
											 styleClass="maskMatricula"
											 value="#{relatorioFeriasListBean.matricula}" >
			            			<a4j:ajax event="change" render="cpf, nomeCompletoPessoa, matricula" execute="@this" />
			        			</h:inputText>
							</div>
						</div>
			
						<div class="input-box box-15">
							<label for="">CPF</label>
							<div class="conteiner">
								<h:inputText id="cpf" 
											 name="cpf"
											 maxlength="14"
											 styleClass="maskCpf"
											 converter="cpfConverter"
											 value="#{relatorioFeriasListBean.cpf}" >
									<a4j:ajax event="change" render="matricula, nomeCompletoPessoa, cpf" execute="@this" />
								</h:inputText>
							</div>
						</div>
			
						<div class="input-box box-45">
							<label for="">Nome</label>
							<div class="conteiner">
								<h:inputText id="nomeCompletoPessoa"
											 name="nomeCompletoPessoa"
											 value="#{relatorioFeriasListBean.nome}" />
							</div>
						</div>
			
						<a id="form:Pesquisar" 
						   href="#" 
						   onclick="openwindow()" 
						   class="bt-padrao fl mg-top-18 mg-bottom-20">Pesquisar</a>			
								
					</div>
								
					<div class="box-35 mg-right-15 fl" style="display: inline-block;">
						<fieldset>	
							<legend>Tipo</legend>					
							<h:selectManyCheckbox  value="#{relatorioFeriasListBean.tiposFerias}" >			
								<f:selectItems id="siTipoFeroas" value="#{relatorioFeriasListBean.comboTipoFerias}"  
									var="tipoFerias" itemValue="#{tipoFerias.id}" itemLabel="#{tipoFerias.descricao}"  />
							</h:selectManyCheckbox >					
						</fieldset>
					</div>
					
					<div class="box-60 fl" style="display: inline-block;">			
					
						<div class="input-box box-15">
							<label for="">Ano Referência</label>
							<div class="conteiner">
								<h:inputText id="anoReferencia" 
											 name="anoReferencia"
											 value="#{relatorioFeriasListBean.anoReferencia}" 
											 maxlength="4"
											 onkeyup="SoNumeros(this)">
								</h:inputText>
							</div>
						</div>			
						
						<div class="input-box box-15">
							<label for="">Data Início</label>
							<div class="conteiner">
								<h:inputText id="dataInicio" 
											 name="dataInicio"
											 styleClass="maskData" 
											 converter="dateConverter"
											 value="#{relatorioFeriasListBean.inicio}" 
											 maxlength="10" />
							</div>
						</div>
			
						<div class="input-box box-15">
							<label for="">Data Fim</label>
							<div class="conteiner">
								<h:inputText id="dataFim" 
											 name="dataFim" 
											 styleClass="maskData"
											 converter="dateConverter"
											 value="#{relatorioFeriasListBean.fim}" 
											 maxlength="10" />
							</div>
						</div>
						
						<div class="select-box box-55">
							<label>Tipo Ocupação</label>
							<div class="conteiner">
								<h:selectOneMenu id="cmbTipoOcupacao" value="#{relatorioFeriasListBean.tipoOcupacao}" converter="entityConverter">
									<f:selectItem itemLabel="TODOS" />
									<f:selectItems value="#{relatorioDemonstrativoCargoBean.comboTipoOcupacao}" var="tipoOcupacao" itemValue="#{tipoOcupacao}" itemLabel="#{tipoOcupacao.descricao}"  />
								</h:selectOneMenu>
							</div>
						</div>			
						
						<div id="div1" class="select-box box-45">
							<h:outputLabel id="lblSetor" value="Setor"/>
							<div id="div2" class="conteiner">
								<h:selectOneMenu id="cmbSetor" 
										 value="#{relatorioFeriasListBean.setor}" converter="entityConverter">
									<f:selectItem id="siSelecione1" itemLabel="Todos..." />
									<f:selectItems id="siSetor" value="#{relatorioFeriasListBean.comboSetor}" 
										var="setor" itemValue="#{setor}" itemLabel="#{setor.nome}"  />
								</h:selectOneMenu>
							</div>
						</div>			
						
						<div class="radios-group box-30">
							<label for="">Formato</label>
							<div class="conteiner">
								<div class="radio-box">
									<h:selectOneRadio id="formato" value="#{relatorioFeriasListBean.formato}">
										<f:selectItem itemLabel="PDF" itemValue="1" />
										<f:selectItem itemLabel="XLS" itemValue="2" />									
									</h:selectOneRadio>
								</div>
							</div>
						</div>			
					
					</div>
					
					<div class="box-100" style="display: inline-block;">
			 			<h:commandButton id="Relatório"
			 							 value="Relatório"
										 action="#{relatorioFeriasListBean.relatorio}" 
			 							 styleClass="bt-padrao fr mg-right-15" />
			 							 
			 			<h:commandButton id="consultar"
										 value="Consultar"
										 action="#{relatorioFeriasListBean.consultar}"
										 styleClass="bt-padrao fr mg-right-10" 
										 render="scroller,lista"/>				 
					</div>	
		
					<div class="tabela-dados">
					<rich:dataTable id="lista" value="#{relatorioFeriasListBean.dataModel}" var="item" rows="10" binding="#{relatorioFeriasListBean.dataTable}">
							<h:column id="col1" headerClass="cel-25">
								<f:facet name="header">NOME</f:facet>
								<h:outputText id="nome" value="#{item.nomeCompleto}" styleClass="cel-25" />
							</h:column>
							<h:column id="col2" headerClass="cel-25">
								<f:facet name="header">ANO REF.</f:facet>
								<center><h:outputText id="ano" value="#{item.anoReferencia}" styleClass="cel-25" /></center>
							</h:column>
							<h:column id="col31" headerClass="cel-25">
		                        <f:facet name="header">PERÍODO</f:facet>
		                        <center><h:outputText id="item31" value="#{item.periodo}" styleClass="cel-25" /></center>
		                    </h:column>
							<h:column id="col3" headerClass="cel-25">
								<f:facet name="header">INÍCIO</f:facet>
								<center>
			                        <h:outputText id="item3" value="#{item.inicio}" >
			                        	<f:convertDateTime id="convInicio" type="date" pattern="dd/MM/yyyy" />
			                        </h:outputText>
		                        </center>
							</h:column>
		   					<h:column id="col4" headerClass="cel-25" >
								<f:facet name="header">FIM</f:facet>
		                       <center>
			                        <h:outputText id="item4" value="#{item.fim}" >
			                        	<f:convertDateTime id="convFim" type="date" pattern="dd/MM/yyyy" />
			                        </h:outputText>
		                        </center>
							</h:column>
							<h:column id="col5" headerClass="cel-25" >
								<f:facet name="header">DIAS</f:facet>
		                       <center>
			                        <h:outputText id="item5" value="#{item.qtdeDias}" />
		                       </center>
							</h:column>
					   <h:column id="col6" headerClass="cel-25" >
								<f:facet name="header">TIPO DE FÉRIAS</f:facet>
		                        <h:outputText id="tipoFerias" value="#{item.tipoFerias}" styleClass="cel-25" />
							</h:column>
						</rich:dataTable>
						<rich:dataScroller id="scroller" for="lista" stepControls="hide" align="center" rendered="#{relatorioFeriasListBean.pagedList.size() > 0}"/>
					</div>
		
					<a href="/srh/paginas/relatorios/relatorioFeriasList.faces" class="bt-voltar fr mg-top-25 mg-right-10">Limpar</a>	
								 
				</rich:tab>
				
				<rich:tab id="tab2" header="Histórico cadastral">
				
					<div class="input-box box-10" style="clear:both">
						<label for="">Ano</label>
						<div class="conteiner">
							<h:inputText id="ano" 
										 name="ano"
										 value="#{relatorioFeriasListBean.ano}" 
										 maxlength="4"
										 size="4"
										  />
						</div>
					</div>				
					
					<div class="select-box box-16">
						<label for="mes">Mês</label>
						<div class="conteiner">
							<h:selectOneMenu id="mesF" value="#{relatorioFeriasListBean.mes}">							  
								<f:selectItem id="mes0F" itemLabel="Selecione..." itemValue="0"/>
								<f:selectItem id="mes1F" itemLabel="Janeiro" itemValue="1"/>
								<f:selectItem id="mes2F" itemLabel="Fevereiro" itemValue="2" />
								<f:selectItem id="mes3F" itemLabel="Março" itemValue="3"/>
								<f:selectItem id="mes4F" itemLabel="Abril" itemValue="4" />
								<f:selectItem id="mes5F" itemLabel="Maio" itemValue="5"/>
								<f:selectItem id="mes6F" itemLabel="Junho" itemValue="6" />
								<f:selectItem id="mes7F" itemLabel="Julho" itemValue="7"/>
								<f:selectItem id="mes8F" itemLabel="Agosto" itemValue="8" />
								<f:selectItem id="mes9F" itemLabel="Setembro" itemValue="9"/>
								<f:selectItem id="mes10F" itemLabel="Outubro" itemValue="10" />
								<f:selectItem id="mes11F" itemLabel="Novembro" itemValue="11"/>
								<f:selectItem id="mes12F" itemLabel="Dezembro" itemValue="12" />																	
							</h:selectOneMenu>
						</div>
					</div>
		
					<br /><br /><br /><br /><br />
					
					<h:commandButton value="Gerar relatório" id="relatorioFeriasAlteradas"
									 action="#{relatorioFeriasListBean.relatorioFeriasAlteradas}" 
		 							 styleClass="bt-padrao fr mg-top-25 mg-right-10" /> 			
 					
				</rich:tab>
				
				<rich:tab id="tab3" header="Fruição Pendente">
				
					<div class="select-box box-16">
						<label for="mes">Origem</label>
						<div class="conteiner">
							<h:selectOneMenu id="tab3origem" value="#{relatorioFeriasFruicaoPendenteBean.origem}">							  
								<f:selectItem id="tab3origem0" itemLabel="Selecione..."/>
								<f:selectItem id="tab3origem1" itemLabel="TCE" itemValue="TCE"/>
								<f:selectItem id="tab3origem2" itemLabel="TCM" itemValue="TCM" />																									
							</h:selectOneMenu>
						</div>
					</div>
					
					<div class="input-box box-15">
							<label for="">Ano Referência</label>
							<div class="conteiner">
								<h:inputText id="tab3anoRef" 
											 name="tab3anoRef"
											 value="#{relatorioFeriasFruicaoPendenteBean.anoReferencia}" 
											 maxlength="4"
										 	 size="4">
								</h:inputText>
							</div>
						</div>			
						
						<div class="input-box box-15">
							<label for="">Período Início</label>
							<div class="conteiner">
								<h:inputText id="tab3periodoInicio" 
											 name="tab3periodoInicio"
											 styleClass="maskData" 
											 converter="dateConverter"
											 value="#{relatorioFeriasFruicaoPendenteBean.inicio}" 
											 maxlength="10" />
							</div>
						</div>
			
						<div class="input-box box-15">
							<label for="">Período Fim</label>
							<div class="conteiner">
								<h:inputText id="tab3periodoFim" 
											 name="tab3periodoFim" 
											 styleClass="maskData"
											 converter="dateConverter"
											 value="#{relatorioFeriasFruicaoPendenteBean.fim}" 
											 maxlength="10" />
							</div>
						</div>
		
					<br /><br /><br /><br /><br />
					
					<h:commandButton value="Gerar relatório" id="tab3relatorioFeriasFruicaoPendente"
									 action="#{relatorioFeriasFruicaoPendenteBean.relatorio}" 
		 							 styleClass="bt-padrao fr mg-top-25 mg-right-10" /> 			
 					
				</rich:tab>
			
			</rich:tabPanel>					 		 
		</h:form>
	</ui:define>
</ui:composition>