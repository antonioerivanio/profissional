<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="content">
		<script>		
		
		function verificaFeriasPosterior(){			
			
			var existeFeriasPosterior = document.getElementById("form:existeFeriasPosterior").value;			
						
			if (existeFeriasPosterior == 'true'){
				return confirm('Existe lançamento de Férias com data final posterior ao último dia trabalhado informado. Deseja prosseguir a gravação?');	
			}
			
		}
		
		</script>

		<div class="titulo-pagina">

			<h2>Exonerar Cargo Efetivo</h2>

		</div>

		<h:form id="form" styleClass="formularios">

			<fieldset>

				<legend>Dados Pessoais</legend>

				<br />
				<h:messages id="messages" infoClass="infoMessage" errorClass="errorMessage" />

				<div class="input-box box-10">
					<label for="">Matricula</label>
					<div class="conteiner">
						<h:inputText id="matricula" 
									 name="matricula"
									 styleClass="maskMatricula"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.matricula}">
						</h:inputText>
					</div>
				</div>

				<div class="input-box box-75">
					<label for="">Nome</label>
					<div class="conteiner">
						<h:inputText id="nomeCompletoPessoa" 
									 name="nomeCompletoPessoa"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.nomeCompleto}" />
					</div>
				</div>

				<div class="input-box box-100">
					<label for="">Mãe</label>
					<div class="conteiner">
						<h:inputText id="mae" 
									 name="mae"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.nomeMae}" />
					</div>
				</div>

				<div class="input-box box-25">
					<label for="">CPF</label>
					<div class="conteiner">
						<h:inputText id="cpf" 
									 maxlength="14" 
									 styleClass="maskCpf"
									 converter="cpfConverter"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.cpf}" />
					</div>
				</div>

				<div class="input-box box-25">
					<label for="">RG</label>
					<div class="conteiner">
						<h:inputText id="rg"
									 maxlength="15"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.rg}" />
					</div>
				</div>

				<div class="input-box box-25">
					<label for="">Emissor</label>
					<div class="conteiner">
						<h:inputText id="rgEmissor"
									 maxlength="10"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.emissorRg}" />
					</div>
				</div>

				<div class="input-box box-25">
					<label for="">UF</label>
					<div class="conteiner">
						<h:inputText id="rgUf"
									 maxlength="2"
									 disabled="true"
									 value="#{exoneracaoFormBean.funcional.pessoal.ufEmissorRg.id}" />
					</div>
				</div>

			</fieldset>


			<!-- Exoneracao -->
			<fieldset>

				<legend>Exoneração</legend>

				<br />

				<div class="select-box box-25">
					<label for="">Tipo Publicação *</label>
					<div class="conteiner">
						<h:selectOneMenu id="tipoPublicacao"
										 converter="entityConverter"
										 value="#{exoneracaoFormBean.funcional.tipoPublicacaoSaida}">
							<f:selectItem id="selecioneTipoPublicacaoSaida" itemLabel="Selecione..." itemValue="" />
							<f:selectItems  id="comboTipoDocumento" 
											value="#{exoneracaoFormBean.comboTipoPublicacao}"
											var="tipoPublicacao"
											itemValue="#{tipoPublicacao}"
											itemLabel="#{tipoPublicacao.descricao}"/>
						</h:selectOneMenu>
					</div>
				</div>

				<div class="input-box box-10">
					<label for="">Publicação *</label>
					<div class="conteiner">
						<h:inputText id="publicacao" 
									 name="publicacao"
									 converter="dateConverter" 
									 styleClass="maskData"
									 value="#{exoneracaoFormBean.funcional.doeSaida}" 
									 maxlength="10" />
					</div>
				</div>

				<div class="select-box box-37">
					<label for="">Tipo de Saida *</label>
					<div class="conteiner">
						<h:selectOneMenu id="tipoSaida"
										 converter="entityConverter"
										 value="#{exoneracaoFormBean.funcional.tipoMovimentoSaida}">
							<f:selectItem id="selecioneTipoMovimentoSaida" itemLabel="Selecione..." itemValue="" />
							<f:selectItems 	id="comboTipoMovimentoSaida" 
											value="#{exoneracaoFormBean.comboTipoMovimentoSaida}"
											var="tipoSaida"
											itemValue="#{tipoSaida}"
											itemLabel="#{tipoSaida.descricao}"/>
						</h:selectOneMenu>
					</div>
				</div>

				<div class="input-box box-12">
					<label for="">Último dia trabalhado *</label>
					<div class="conteiner">
						<h:inputText id="dataFinal" 
									 name="dataFinal"
									 converter="dateConverter" 
									 styleClass="maskData"
									 value="#{exoneracaoFormBean.funcional.saida}" 
									 maxlength="10">
							<a4j:ajax 	 event="blur" 
										 listener="#{exoneracaoFormBean.verificaFeriasPosterior()}" 
										 execute="@this" 
										 render="existeFeriasPosterior" />									 
						</h:inputText>
						
						<h:inputHidden id="existeFeriasPosterior" value="#{exoneracaoFormBean.existeFeriasPosterior}" />
					</div>
				</div>

				<div class="textarea-box box-100">
					<label for="">Observação da Saída *</label>
					<div class="conteiner">
						<h:inputTextarea id="observacaoSaida"
										 value="#{exoneracaoFormBean.funcional.descricaoSaida}"
										 validatorMessage="O campo Observação da Saída excedeu o tamanho máximo de 2000 caracteres" >
							<f:validateLength maximum="2000" />
						</h:inputTextarea>
					</div>
				</div>

			</fieldset>

			<h:commandButton action="#{exoneracaoFormBean.salvar}" 
							 value="Salvar" 
							 styleClass="bt-padrao fr"
							 onclick="return verificaFeriasPosterior();"/>
			
			<a href="/srh/paginas/funcional/exoneracaoList.faces" class="bt-voltar fr mg-right-10">Voltar</a>

		</h:form>

	</ui:define>
</ui:composition>
