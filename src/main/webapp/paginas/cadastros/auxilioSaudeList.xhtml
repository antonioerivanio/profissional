<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../WEB-INF/templates/page.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="content">

		<div class="titulo-pagina">
			<h2>Consulta de Servidor com Auxilio Saúde</h2>
		</div>

		<h:form id="form" styleClass="formularios" prependId="true" >
			<h:messages infoClass="infoMessage" errorClass="errorMessage" />

			<ui:fragment
				rendered="#{not LoginBean.anyGranted('ROLE_PESSOA_SERVIDOR')}">

				<div class="input-box box-25">
					<label for="">Nome</label>
					<div class="conteiner">
						<h:inputText
							value="#{auxilioSaudeListBean.entidade.funcional.pessoal.nome}" />
					</div>
				</div>

				<div class="input-box box-15">
					<label for="">CPF</label>
					<div class="conteiner">
						<h:inputText maxlength="14" styleClass="maskCpf"
							value="#{auxilioSaudeListBean.entidade.funcional.pessoal.cpf}" />
					</div>
				</div>

				<div class="input-box box-15">
					<label>Data da Solicitação</label>
					<div class="conteiner">
						<h:inputText styleClass="maskData" converter="dateConverter"
							value="#{auxilioSaudeListBean.entidade.dataInicioRequisicao}" />
					</div>
				</div>

				<div class="input-box box-15">
					<label>Data da Aprovação</label>
					<div class="conteiner">
						<h:inputText styleClass="maskData" converter="dateConverter"
							value="#{auxilioSaudeListBean.entidade.dataFimRequisicao}" />
					</div>
				</div>

				<h:commandButton id="consultar" value="Consultar"
					action="#{auxilioSaudeListBean.consultar}"
					styleClass="bt-padrao fl mg-top-18" render="scroller,lista" />

				<h:commandButton id="relatorio" value="Relatório"
					action="#{auxilioSaudeFormBean.relatorio}"
					styleClass="bt-padrao fl mg-top-18 mg-left-10"
					style="margin-left: 10px" />

			</ui:fragment>

			<ui:insert name="camposEntrada"></ui:insert>

			<div class="tabela-dados">
				<center>
					<strong><h:outputLabel value="Quantidade Registros "></h:outputLabel></strong>
					<h:outputText value="#{auxilioSaudeListBean.count}" />
				</center>
				<rich:dataTable id="lista" var="item"
					rows="#{auxilioSaudeListBean.dataModel.pageSize}"
					value="#{auxilioSaudeListBean.dataModel}">

					<rich:column headerClass="cel-25">
						<f:facet name="header">
                            Nome
                        </f:facet>
						<h:outputText value="#{item.funcional.pessoal.nomeCompleto}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
                            CPF
                        </f:facet>
						<center>
							<h:outputText value="#{item.funcional.pessoal.cpf}">
								<f:converter converterId="cpfConverter" />
							</h:outputText>
						</center>
					</rich:column>
					<rich:column headerClass="cel-10">
						<f:facet name="header">
                            Valor Mensal
                        </f:facet>
						<center>
							<h:outputText value="#{item.valorGastoPlanoSaude}">
								<f:convertNumber type="currency" currencySymbol="R$"
									locale="pt_br" />
							</h:outputText>
						</center>
					</rich:column>

					<rich:column headerClass="cel-10">
						<f:facet name="header">
                            Data da Solicitação
                        </f:facet>
						<center>
							<h:outputText value="#{item.dataInicioRequisicao}" />
						</center>
					</rich:column>

					<rich:column headerClass="cel-10">
						<f:facet name="header">
                            Data da Modificação
                        </f:facet>
						<center>
							<h:outputText value="#{item.dataAlteracao}" />
						</center>
					</rich:column>

					<rich:column headerClass="cel-10">
						<f:facet name="header">
                            Data da Aprovação
                        </f:facet>
						<center>
							<h:outputText value="#{item.dataFimRequisicao}" />
						</center>
					</rich:column>

					<rich:column headerClass="cel-15">
						<f:facet name="header">
                            STATUS
                        </f:facet>
						<center>
							<h:outputText value="#{item.statusAprovacao}" />
						</center>
					</rich:column>

					<rich:column
						rendered="#{not LoginBean.anyGranted('ROLE_PESSOA_ALTERAR')}">
						<f:facet name="header">
                            DETALHAR
                        </f:facet>
						<h:commandLink id="detalhar" value="Detalhar" 
							action="#{auxilioSaudeListBean.editar}" styleClass="ico-detail"> maskedinput
                            <f:setPropertyActionListener
								target="#{auxilioSaudeListBean.entidadeEditar}" value="#{item}" />
						</h:commandLink>
					</rich:column>
					<rich:column
						rendered="#{not LoginBean.anyGranted('ROLE_PESSOA_ALTERAR')}">
						<f:facet name="header">
                            AÇÃO
                        </f:facet>
						<a4j:commandLink id="editar" value="Editar"
							action="#{auxilioSaudeListBean.editar}" styleClass="ico-editar"
							rendered="#{auxilioSaudeListBean.validarExibicaoBotaoEditar(item)}">
							<f:setPropertyActionListener
								target="#{auxilioSaudeListBean.entidadeEditar}" value="#{item}" />
						</a4j:commandLink>
					</rich:column>
					<!-- <rich:column id="col6" rendered="#{LoginBean.anyGranted('ROLE_PESSOA_EXCLUIR')}">
                        <f:facet name="header">
                            EXCLUIR
                        </f:facet>
                        <a4j:commandLink id="excluir"
                        			   value="Excluir"                        			   
                        			   styleClass="ico-delete"
                        			   onclick="alertaExclusao();"
                        			   execute="@this">
                            <f:setPropertyActionListener target="#{pessoaBean.entidade}" value="#{item}" />
                        </a4j:commandLink>
                        <a4j:jsFunction name="excluir" action="#{pessoaBean.excluir}" render="form"/> 
                    </rich:column> -->

				</rich:dataTable>
				<rich:dataScroller id="scroller" for="lista" stepControls="hide"
					renderIfSinglePage="false" page="#{auxilioSaudeListBean.pagina}" />

			</div>

			<ui:fragment
				rendered="#{not LoginBean.anyGranted('ROLE_PESSOA_SERVIDOR')}">

				<h:commandButton id="incluir" value="Incluir"
					action="incluirAlterar" styleClass="bt-padrao fr mg-right-15"
					rendered="#{not LoginBean.anyGranted('ROLE_PESSOA_INSERIR')}" />

				<h:commandButton id="limpaTela" value="Limpar" action="listar"
					styleClass="bt-padrao fr mg-right-15" />
			</ui:fragment>

			<!-- <h:commandButton id="relatorio2"
							 value="Relatório"
							 action="#{pessoaBean.relatorio}" 
							 styleClass="bt-padrao fr mg-right-15" 
							 rendered="#{LoginBean.anyGranted('ROLE_PESSOA_SERVIDOR')}" /> -->

		</h:form>

	</ui:define>
</ui:composition>
